(self.webpackChunksmar_dashboard=self.webpackChunksmar_dashboard||[]).push([[22],{1022:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CategoriesModule:()=>dt});var a=i(8583),n=i(3998),o=i(3679),s=i(7491),r=i(2238),l=i(7716),c=i(501);function u(t,e){1&t&&l._UZ(0,"img",31)}function d(t,e){if(1&t&&l._UZ(0,"img",32),2&t){const t=l.oxw(2);l.Q6J("src",t.imgTemp,l.LSH)}}function g(t,e){1&t&&(l.TgZ(0,"label",33),l._uU(1,"Escoje la imagen"),l.qZA())}function m(t,e){if(1&t&&(l.TgZ(0,"label",33),l._uU(1),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.Oqu(t.image.value)}}const p=function(t){return{"is-invalid":t}};function Z(t,e){if(1&t){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",10),l.TgZ(2,"label",11),l._uU(3,"Icono ("),l.TgZ(4,"a",12),l._uU(5,"Iconos disponibles"),l.qZA(),l._uU(6,")"),l.qZA(),l.TgZ(7,"div",13),l.TgZ(8,"input",14),l.NdJ("change",function(e){return l.CHM(t),l.oxw().viewIcon(e)}),l.qZA(),l.TgZ(9,"div",15),l.TgZ(10,"div",16),l._UZ(11,"div",17),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"span",18),l._uU(13,"Por favor coloque un icono"),l.qZA(),l.qZA(),l.TgZ(14,"div",10),l.TgZ(15,"label",19),l.YNc(16,u,1,0,"img",20),l.YNc(17,d,1,1,"img",21),l.qZA(),l.TgZ(18,"div",22),l.TgZ(19,"input",23),l.NdJ("change",function(e){return l.CHM(t),l.oxw().validateImage(e)}),l.qZA(),l.TgZ(20,"span",18),l._uU(21,"Por favor coloque una imagen"),l.qZA(),l.YNc(22,g,2,0,"label",24),l.YNc(23,m,2,1,"label",24),l.TgZ(24,"small",25),l._uU(25,"tama\xf1o: 170px * 170px | formato: jpg o png"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"div",10),l.TgZ(27,"label",26),l._uU(28,"Nombre"),l.qZA(),l._UZ(29,"input",27),l.qZA(),l.TgZ(30,"div",10),l.TgZ(31,"label",28),l._uU(32,"Url"),l.qZA(),l._UZ(33,"input",29),l.qZA(),l.TgZ(34,"div",10),l.TgZ(35,"label"),l._uU(36,"Lista de titulos"),l.qZA(),l._UZ(37,"input",30),l.qZA(),l.BQk()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("ngClass",l.VKq(10,p,t.invalidField("icon"))),l.xp6(3),l.Q6J("innerHTML",t.iconView,l.oJD),l.xp6(5),l.Q6J("ngIf",!t.imgTemp),l.xp6(1),l.Q6J("ngIf",t.imgTemp),l.xp6(2),l.Q6J("ngClass",l.VKq(12,p,t.invalidField("image"))),l.xp6(3),l.Q6J("ngIf",!t.image.value),l.xp6(1),l.Q6J("ngIf",t.image.value),l.xp6(6),l.s9C("value",t.nameView),l.xp6(4),l.s9C("value",t.urlInput),l.xp6(4),l.s9C("value",t.titleView)}}function f(t,e){1&t&&(l.ynx(0),l.TgZ(1,"div",34),l._UZ(2,"div",35),l._UZ(3,"div",36),l._UZ(4,"div",37),l._UZ(5,"div",38),l._UZ(6,"div",39),l._UZ(7,"div",40),l._UZ(8,"div",41),l._UZ(9,"div",42),l._UZ(10,"div",43),l.qZA(),l.BQk())}let h=(()=>{class t{constructor(t,e,i,a){this.form=t,this.categoriesService=e,this.dialogRef=i,this.data=a,this.f=this.form.group({icon:["",o.kI.required],image:""}),this.formSubmit=!1,this.imgTemp="",this.resultImg="",this.nameImage="",this.urlInput="",this.iconView="",this.loadData=!1,this.nameView="",this.titleView={},this.state="",this.view=0}get icon(){return this.f.controls.icon}get image(){return this.f.controls.image}ngOnInit(){this.loadData=!0,this.categoriesService.getItem(this.data.id).subscribe(t=>{this.icon.setValue(t.icon),this.iconView=`<i class="${t.icon}"></i>`,this.imgTemp=t.image,this.nameImage=t.image,this.nameView=t.name,this.urlInput=t.url,this.titleView=JSON.parse(t.title_list),this.state=t.state,this.view=t.view,this.loadData=!1})}editCategory(){if(this.loadData=!0,this.formSubmit=!0,this.f.invalid)return;""==this.resultImg&&(this.resultImg=this.nameImage);let t=this.f.controls.icon.value;null!=this.f.controls.icon.value.split('"')[1]&&(t=this.f.controls.icon.value.split('"')[1]);const e={icon:t,image:this.resultImg,name:this.nameView,title_list:JSON.stringify(this.titleView),url:this.urlInput,view:Number(this.view),state:this.state};this.categoriesService.patchData(this.data.id,e,localStorage.getItem("token")).subscribe(t=>{this.loadData=!1,this.dialogRef.close("save"),n.$.basicAlert("Listo","La categoria ha sido guardada","success")},t=>{this.loadData=!1,n.$.basicAlert("Error","Ha ocurrido un error","error")})}invalidField(t){return s.w.invalidField(t,this.f,this.formSubmit)}validateImage(t){s.w.validateImage(t).then(t=>{this.imgTemp=t,this.resultImg=t})}isRepeatCategory(){return t=>{const e=s.w.createUrl(t.value);return new Promise(t=>{this.categoriesService.getFilterData("url",e).subscribe(i=>{Object.keys(i).length>0?t({category:!0}):this.urlInput=e})})}}viewIcon(t){this.iconView=t.target.value,t.target.value=this.f.controls.icon.value.split('"')[1]}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.qu),l.Y36(c.G),l.Y36(r.so),l.Y36(r.WI))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-edit-categories"]],decls:16,vars:3,consts:[[1,"card","card-warning"],[1,"card-header"],[1,"card-title","mb-0"],["type","button","mat-dialog-close","",1,"close"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"card-body"],[4,"ngIf"],[1,"card-footer"],["mat-dialog-close","",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-warning","float-right"],[1,"form-group"],["for","inputIcon"],["href","https://linearicons.com/free","target","blank"],[1,"input-group"],["formControlName","icon","type","text","id","inputIcon","placeholder","Icono",1,"form-control",3,"ngClass","change"],[1,"input-group-append"],[1,"input-group-text"],[3,"innerHTML"],[1,"invalid-feedback"],["for","customFile"],["src","../../../../../assets/img/undraw_Images_re_0kll.svg","alt","","width","170px","class","img-fluid",4,"ngIf"],["alt","","width","170px","class","img-fluid",3,"src",4,"ngIf"],[1,"custom-file"],["formControlName","image","type","file","id","customFile",1,"custom-file-input",3,"ngClass","change"],["class","custom-file-label","for","customFile",4,"ngIf"],[1,"mt-2"],["for","inputName"],["type","text","id","inputName","placeholder","Nombre","readonly","",1,"form-control",3,"value"],["for","inputUrl"],["type","text","id","inputUrl","placeholder","Url","readonly","",1,"form-control",3,"value"],["type","text","placeholder","Lista de titulos","readonly","",1,"form-control",3,"value"],["src","../../../../../assets/img/undraw_Images_re_0kll.svg","alt","","width","170px",1,"img-fluid"],["alt","","width","170px",1,"img-fluid",3,"src"],["for","customFile",1,"custom-file-label"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1"],[1,"sk-cube","sk-cube2"],[1,"sk-cube","sk-cube3"],[1,"sk-cube","sk-cube4"],[1,"sk-cube","sk-cube5"],[1,"sk-cube","sk-cube6"],[1,"sk-cube","sk-cube7"],[1,"sk-cube","sk-cube8"],[1,"sk-cube","sk-cube9"]],template:function(t,e){1&t&&(l.TgZ(0,"mat-dialog-content"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"h2",2),l._uU(4,"Editar categoria"),l.qZA(),l.TgZ(5,"button",3),l._uU(6,"\xd7"),l.qZA(),l.qZA(),l.TgZ(7,"form",4),l.NdJ("ngSubmit",function(){return e.editCategory()}),l.TgZ(8,"div",5),l.YNc(9,Z,38,14,"ng-container",6),l.YNc(10,f,11,0,"ng-container",6),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"button",8),l._uU(13,"Cerrar"),l.qZA(),l.TgZ(14,"button",9),l._uU(15," Guardar "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(7),l.Q6J("formGroup",e.f),l.xp6(2),l.Q6J("ngIf",!e.loadData),l.xp6(1),l.Q6J("ngIf",e.loadData))},directives:[r.xY,r.ZT,o._Y,o.JL,o.sg,a.O5,o.Fj,o.JJ,o.u,a.mk],styles:[""]}),t})();var b=i(6461),v=i(8341),q=i(6627);function T(t,e){1&t&&l._UZ(0,"img",36)}function x(t,e){if(1&t&&l._UZ(0,"img",37),2&t){const t=l.oxw(2);l.Q6J("src",t.imgTemp,l.LSH)}}function A(t,e){1&t&&(l.TgZ(0,"label",38),l._uU(1,"Escoje la imagen"),l.qZA())}function _(t,e){if(1&t&&(l.TgZ(0,"label",38),l._uU(1),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.Oqu(t.image.value)}}function w(t,e){1&t&&(l.TgZ(0,"span",18),l._uU(1,"Por favor coloque un nombre"),l.qZA())}function k(t,e){1&t&&(l.TgZ(0,"span",18),l._uU(1,"Por favor escriba correctamente el nombre"),l.qZA())}function U(t,e){1&t&&(l.TgZ(0,"span",18),l._uU(1,"La categoria ya existe"),l.qZA())}function I(t,e){1&t&&(l.TgZ(0,"button",41),l.TgZ(1,"mat-icon"),l._uU(2,"cancel"),l.qZA(),l.qZA())}function C(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"mat-chip",39),l.NdJ("removed",function(){const e=l.CHM(t).$implicit;return l.oxw(2).remove(e)}),l._uU(1),l.YNc(2,I,3,0,"button",40),l.qZA()}if(2&t){const t=e.$implicit,i=l.oxw(2);l.Q6J("selectable",i.selectable)("removable",i.removable),l.xp6(1),l.hij(" ",t," "),l.xp6(1),l.Q6J("ngIf",i.removable)}}function y(t,e){1&t&&(l.TgZ(0,"span",18),l._uU(1,"Por favor ingrese un titulo"),l.qZA())}function N(t,e){1&t&&(l.TgZ(0,"span",18),l._uU(1,"Escribe correctamente el titulo"),l.qZA())}const J=function(t){return{"is-invalid":t}};function S(t,e){if(1&t){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",10),l.TgZ(2,"label",11),l._uU(3,"Icono ("),l.TgZ(4,"a",12),l._uU(5,"Iconos disponibles"),l.qZA(),l._uU(6,")"),l.qZA(),l.TgZ(7,"div",13),l.TgZ(8,"input",14),l.NdJ("change",function(e){return l.CHM(t),l.oxw().viewIcon(e)}),l.qZA(),l.TgZ(9,"div",15),l.TgZ(10,"div",16),l._UZ(11,"div",17),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"span",18),l._uU(13,"Por favor coloque un icono"),l.qZA(),l.qZA(),l.TgZ(14,"div",10),l.TgZ(15,"label",19),l.YNc(16,T,1,0,"img",20),l.YNc(17,x,1,1,"img",21),l.qZA(),l.TgZ(18,"div",22),l.TgZ(19,"input",23),l.NdJ("change",function(e){return l.CHM(t),l.oxw().validateImage(e)}),l.qZA(),l.TgZ(20,"span",18),l._uU(21,"Por favor coloque una imagen"),l.qZA(),l.YNc(22,A,2,0,"label",24),l.YNc(23,_,2,1,"label",24),l.TgZ(24,"small",25),l._uU(25,"tama\xf1o: 170px * 170px | formato: jpg o png"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"div",10),l.TgZ(27,"label",26),l._uU(28,"Nombre"),l.qZA(),l._UZ(29,"input",27),l.YNc(30,w,2,0,"span",28),l.YNc(31,k,2,0,"span",28),l.YNc(32,U,2,0,"span",28),l.qZA(),l.TgZ(33,"div",10),l.TgZ(34,"label",29),l._uU(35,"Url"),l.qZA(),l._UZ(36,"input",30),l.qZA(),l.TgZ(37,"div",10),l.TgZ(38,"label"),l._uU(39,"Lista de titulos"),l.qZA(),l.TgZ(40,"div",31),l.TgZ(41,"mat-chip-list",32,33),l.YNc(43,C,3,4,"mat-chip",34),l.TgZ(44,"input",35),l.NdJ("matChipInputTokenEnd",function(e){return l.CHM(t),l.oxw().add(e)}),l.qZA(),l.qZA(),l.qZA(),l.YNc(45,y,2,0,"span",28),l.YNc(46,N,2,0,"span",28),l.qZA(),l.BQk()}if(2&t){const t=l.MAs(42),e=l.oxw();l.xp6(8),l.Q6J("ngClass",l.VKq(19,J,e.invalidField("icon"))),l.xp6(3),l.Q6J("innerHTML",e.iconView,l.oJD),l.xp6(5),l.Q6J("ngIf",!e.imgTemp),l.xp6(1),l.Q6J("ngIf",e.imgTemp),l.xp6(2),l.Q6J("ngClass",l.VKq(21,J,e.invalidField("image"))),l.xp6(3),l.Q6J("ngIf",!e.image.value),l.xp6(1),l.Q6J("ngIf",e.image.value),l.xp6(6),l.Q6J("ngClass",l.VKq(23,J,e.invalidField("name")||e.name.invalid&&(null==e.name.errors?null:e.name.errors.pattern)||e.name.invalid&&(null==e.name.errors?null:e.name.errors.category))),l.xp6(1),l.Q6J("ngIf",e.name.invalid&&(null==e.name.errors?null:e.name.errors.required)),l.xp6(1),l.Q6J("ngIf",e.name.invalid&&(null==e.name.errors?null:e.name.errors.pattern)),l.xp6(1),l.Q6J("ngIf",e.name.invalid&&(null==e.name.errors?null:e.name.errors.category)),l.xp6(4),l.s9C("value",e.urlInput),l.xp6(4),l.Q6J("ngClass",l.VKq(25,J,e.invalidField("titleList"))),l.xp6(3),l.Q6J("ngForOf",e.titleList.value),l.xp6(1),l.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),l.xp6(1),l.Q6J("ngIf",e.titleList.invalid&&(null==e.titleList.errors?null:e.titleList.errors.required)),l.xp6(1),l.Q6J("ngIf",e.titleList.invalid&&(null==e.titleList.errors?null:e.titleList.errors.pattern))}}function D(t,e){1&t&&(l.ynx(0),l.TgZ(1,"div",42),l._UZ(2,"div",43),l._UZ(3,"div",44),l._UZ(4,"div",45),l._UZ(5,"div",46),l._UZ(6,"div",47),l._UZ(7,"div",48),l._UZ(8,"div",49),l._UZ(9,"div",50),l._UZ(10,"div",51),l.qZA(),l.BQk())}let Q=(()=>{class t{constructor(t,e,i){this.form=t,this.categoriesService=e,this.dialogRef=i,this.f=this.form.group({icon:["",o.kI.required],image:["",o.kI.required],name:["",{validators:[o.kI.required,o.kI.pattern("[,\\a-zA-Z\xe1\xe9\xed\xf3\xfa\xf1\xc1\xc9\xcd\xd3\xda ]*")],asyncValidators:[this.isRepeatCategory()],updateOn:"blur"}],titleList:[[],[o.kI.required,o.kI.pattern('["\\[\\]\\-\\,\\0-9a-zA-Z\xe1\xe9\xed\xf3\xfa\xf1\xc1\xc9\xcd\xd3\xda ]*')]]}),this.formSubmit=!1,this.imgTemp="",this.urlInput="",this.iconView="",this.loadData=!1,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[b.K5,b.OC]}get name(){return this.f.controls.name}get image(){return this.f.controls.image}get titleList(){return this.f.controls.titleList}get icon(){return this.f.controls.icon}ngOnInit(){}saveCategory(){if(this.loadData=!0,this.formSubmit=!0,this.f.invalid)return;const t={icon:this.f.controls.icon.value.split('"')[1],image:this.imgTemp,name:this.f.controls.name.value,title_list:JSON.stringify(this.f.controls.titleList.value),url:this.urlInput,view:0,state:"hidden"};this.categoriesService.postData(t,localStorage.getItem("token")).subscribe(t=>{this.loadData=!1,this.dialogRef.close("save"),n.$.basicAlert("Listo","La categoria ha sido guardada","success")},t=>{this.loadData=!1,n.$.basicAlert("Error","Ha ocurrido un error","error")})}invalidField(t){return s.w.invalidField(t,this.f,this.formSubmit)}validateImage(t){s.w.validateImage(t).then(t=>{this.imgTemp=t})}isRepeatCategory(){return t=>{const e=s.w.createUrl(t.value);return new Promise(t=>{this.categoriesService.getFilterData("url",e).subscribe(i=>{Object.keys(i).length>0?t({category:!0}):this.urlInput=e})})}}add(t){const e=(t.value||"").trim();(e||"").trim()&&this.f.controls.titleList.value.push(e.trim()),t.chipInput.clear(),this.f.controls.titleList.updateValueAndValidity()}remove(t){const e=this.f.controls.titleList.value.indexOf(t);e>=0&&this.f.controls.titleList.value.splice(e,1),this.f.controls.titleList.updateValueAndValidity()}viewIcon(t){this.iconView=t.target.value,t.target.value=this.f.controls.icon.value.split('"')[1]}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.qu),l.Y36(c.G),l.Y36(r.so))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-new-categories"]],decls:16,vars:3,consts:[[1,"card","card-warning"],[1,"card-header"],[1,"card-title","mb-0"],["type","button","mat-dialog-close","",1,"close"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"card-body"],[4,"ngIf"],[1,"card-footer"],["mat-dialog-close","",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-warning","float-right"],[1,"form-group"],["for","inputIcon"],["href","https://linearicons.com/free","target","blank"],[1,"input-group"],["formControlName","icon","type","text","id","inputIcon","placeholder","Icono",1,"form-control",3,"ngClass","change"],[1,"input-group-append"],[1,"input-group-text"],[3,"innerHTML"],[1,"invalid-feedback"],["for","customFile"],["src","../../../../../assets/img/undraw_Images_re_0kll.svg","alt","","width","170px","class","img-fluid",4,"ngIf"],["alt","","width","170px","class","img-fluid",3,"src",4,"ngIf"],[1,"custom-file"],["formControlName","image","type","file","id","customFile",1,"custom-file-input",3,"ngClass","change"],["class","custom-file-label","for","customFile",4,"ngIf"],[1,"mt-2"],["for","inputName"],["formControlName","name","type","text","id","inputName","placeholder","Nombre",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","inputUrl"],["type","text","id","inputUrl","placeholder","Url","readonly","",1,"form-control",3,"value"],[1,"form-control",3,"ngClass"],["aria-label","Lista de titulos"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Nuevo titulo...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["src","../../../../../assets/img/undraw_Images_re_0kll.svg","alt","","width","170px",1,"img-fluid"],["alt","","width","170px",1,"img-fluid",3,"src"],["for","customFile",1,"custom-file-label"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1"],[1,"sk-cube","sk-cube2"],[1,"sk-cube","sk-cube3"],[1,"sk-cube","sk-cube4"],[1,"sk-cube","sk-cube5"],[1,"sk-cube","sk-cube6"],[1,"sk-cube","sk-cube7"],[1,"sk-cube","sk-cube8"],[1,"sk-cube","sk-cube9"]],template:function(t,e){1&t&&(l.TgZ(0,"mat-dialog-content"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"h2",2),l._uU(4,"Nueva categoria"),l.qZA(),l.TgZ(5,"button",3),l._uU(6,"\xd7"),l.qZA(),l.qZA(),l.TgZ(7,"form",4),l.NdJ("ngSubmit",function(){return e.saveCategory()}),l.TgZ(8,"div",5),l.YNc(9,S,47,27,"ng-container",6),l.YNc(10,D,11,0,"ng-container",6),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"button",8),l._uU(13,"Cerrar"),l.qZA(),l.TgZ(14,"button",9),l._uU(15," Guardar "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(7),l.Q6J("formGroup",e.f),l.xp6(2),l.Q6J("ngIf",!e.loadData),l.xp6(1),l.Q6J("ngIf",e.loadData))},directives:[r.xY,r.ZT,o._Y,o.JL,o.sg,a.O5,o.Fj,o.JJ,o.u,a.mk,v.qn,a.sg,v.oH,v.HS,v.qH,q.Hw],styles:[""]}),t})();var Y=i(873),L=i(1494),F=i(2789),H=i(7238),O=i(4730),V=i(4655),E=i(7697);function M(t,e){1&t&&(l.TgZ(0,"th",34),l._uU(1,"No."),l.qZA())}function B(t,e){if(1&t&&(l.TgZ(0,"td",35),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Oqu(t.position)}}function R(t,e){1&t&&(l.TgZ(0,"th",34),l._uU(1,"Nombre"),l.qZA())}function j(t,e){if(1&t&&(l.TgZ(0,"td",35),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.xp6(1),l.Oqu(t.name)}}function $(t,e){1&t&&(l.TgZ(0,"th",36),l._uU(1,"Acciones"),l.qZA())}function G(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"td",35),l.TgZ(1,"button",37),l.NdJ("click",function(){const e=l.CHM(t).$implicit,i=l.oxw();return i.expandedElement=i.expandedElement===e?null:e}),l._UZ(2,"i",38),l.qZA(),l.TgZ(3,"button",39),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().editCategorie(e.id)}),l._UZ(4,"i",40),l.qZA(),l.TgZ(5,"button",41),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw().deleteCategorie(e.id,e.name)}),l._UZ(6,"i",42),l.qZA(),l.qZA()}}function z(t,e){if(1&t&&(l.TgZ(0,"div"),l._UZ(1,"img",53),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.s9C("src",t.image,l.LSH),l.s9C("alt",t.name)}}function K(t,e){if(1&t&&(l.TgZ(0,"div"),l._UZ(1,"img",54),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.s9C("alt",t.name)}}function P(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"input",55),l.NdJ("change",function(e){return l.CHM(t),l.oxw(2).changeState(e)}),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.MGl("id","switch_",t.id,"")}}function X(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"input",56),l.NdJ("change",function(e){return l.CHM(t),l.oxw(2).changeState(e)}),l.qZA()}if(2&t){const t=l.oxw().$implicit;l.MGl("id","switch_",t.id,"")}}function W(t,e){if(1&t&&(l.TgZ(0,"td",35),l.TgZ(1,"div",43),l.TgZ(2,"ul",44),l.TgZ(3,"li",45),l.YNc(4,z,2,2,"div",31),l.YNc(5,K,2,1,"div",31),l.qZA(),l.TgZ(6,"li",45),l._UZ(7,"span",46),l.TgZ(8,"strong",47),l._uU(9,"Url:"),l.qZA(),l._uU(10),l.qZA(),l.TgZ(11,"li",45),l._UZ(12,"span",46),l.TgZ(13,"strong",47),l._uU(14,"Icono:"),l.qZA(),l._UZ(15,"i"),l.qZA(),l.TgZ(16,"li",45),l._UZ(17,"span",46),l.TgZ(18,"strong",47),l._uU(19,"Lista de titulos:"),l.qZA(),l._uU(20),l.ALo(21,"jsonToString"),l.qZA(),l.TgZ(22,"li",45),l._UZ(23,"span",46),l.TgZ(24,"strong",47),l._uU(25,"Vista:"),l.qZA(),l._uU(26),l.qZA(),l.TgZ(27,"li",48),l.TgZ(28,"div",49),l.YNc(29,P,1,1,"input",50),l.YNc(30,X,1,1,"input",51),l._UZ(31,"label",52),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=e.$implicit,i=l.oxw();l.uIk("colspan",i.displayedColumns.length),l.xp6(1),l.Q6J("@detailExpand",t==i.expandedElement?"expanded":"collapsed"),l.xp6(3),l.Q6J("ngIf",!(""==t.image||null==t.image)),l.xp6(1),l.Q6J("ngIf",""==t.image||null==t.image),l.xp6(5),l.hij(" ",t.url," "),l.xp6(5),l.Tol(t.icon),l.xp6(5),l.hij(" ",l.lcZ(21,13,t.title_list)," "),l.xp6(6),l.hij(" ",t.view," "),l.xp6(3),l.Q6J("ngIf","show"==t.state),l.xp6(1),l.Q6J("ngIf","hidden"==t.state),l.xp6(1),l.MGl("for","switch_",t.id,"")}}function tt(t,e){1&t&&l._UZ(0,"tr",57)}function et(t,e){if(1&t&&l._UZ(0,"tr",58),2&t){const t=e.$implicit,i=l.oxw();l.ekj("example-expanded-row",i.expandedElement===t)}}function it(t,e){1&t&&l._UZ(0,"tr",59)}function at(t,e){if(1&t&&(l.TgZ(0,"tr",60),l.TgZ(1,"td",61),l._uU(2," No data matching the filter "),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.uIk("colspan",t.displayedColumns.length)}}function nt(t,e){1&t&&(l.ynx(0),l.TgZ(1,"div",62),l._UZ(2,"div",63),l._UZ(3,"div",64),l._UZ(4,"div",65),l._UZ(5,"div",66),l._UZ(6,"div",67),l._UZ(7,"div",68),l._UZ(8,"div",69),l._UZ(9,"div",70),l._UZ(10,"div",71),l.qZA(),l.BQk())}const ot=function(){return["/"]},st=function(){return["expandedDetail"]},rt=function(){return[10,25,50,100]},lt=[{path:"",component:(()=>{class t{constructor(t,e,i){this.categoriesService=t,this.subcategoriesService=e,this.dialog=i,this.displayedColumns=["position","name","actions"],this.categories=[],this.loadData=!1}ngOnInit(){this.getData()}getData(){this.loadData=!0,this.categoriesService.getData().subscribe(t=>{let e=Object.keys(t).length;this.categories=Object.keys(t).map(i=>({id:i,position:e--,name:t[i].name,icon:t[i].icon,image:t[i].image,title_list:t[i].title_list,url:t[i].url,view:t[i].view,state:t[i].state})),this.dataSource=new F.by(this.categories),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.loadData=!1})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}newCategory(){this.dialog.open(Q,{width:"100%"}).afterClosed().subscribe(t=>{t&&this.getData()})}changeState(t){const e=t.target.checked?{state:"show"}:{state:"hidden"};this.categoriesService.patchData(t.target.id.split("_")[1],e,localStorage.getItem("token")).subscribe(()=>{this.getData()})}editCategorie(t){this.dialog.open(h,{width:"100%",data:{id:t}}).afterClosed().subscribe(t=>{t&&this.getData()})}deleteCategorie(t,e){n.$.confirmAlert("\xbfEsta seguro?","La informaci\xf3n no podra recuperarse","warning","Si, eliminar").then(i=>{i.isConfirmed&&this.subcategoriesService.getFilterData("category",e).subscribe(e=>{Object.keys(e).length>0?n.$.basicAlert("Error","La categoria tiene subcategorias","error"):this.categoriesService.deleteData(t,localStorage.getItem("token")).subscribe(t=>{n.$.basicAlert("Listo","La categoria ha sido eliminada","success"),this.getData()})})})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(c.G),l.Y36(O.b),l.Y36(r.uw))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-categories"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Y.NW,5),l.Gf(L.YE,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.paginator=t.first),l.iGM(t=l.CRH())&&(e.sort=t.first)}},decls:44,vars:14,consts:[[1,"content-wrapper"],[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"breadcrumb","float-sm-right"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row","mb-2",3,"hidden"],[1,"col-12","col-sm-6","col-xl-3","mr-auto"],["type","button",1,"btn","btn-block","bg-gradient-primary",3,"click"],[1,"col-12","col-sm-6","col-xl-3","ml-auto"],["placeholder","Buscar",1,"form-control",3,"keyup"],[1,"card-body"],[1,"mat-table-container"],["mat-table","","matSort","","matSortActive","position","matSortDirection","asc","multiTemplateDataRows","",1,"mat-elevation-z8","matTable-table",3,"hidden","dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[4,"ngIf"],[1,"card-footer"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"hidden","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"btn","btn-sm","btn-warning","mr-1",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-dark",3,"click"],[1,"fas","fa-pencil-alt"],[1,"btn","btn-sm","btn-danger","mr-1",3,"click"],[1,"fas","fa-trash"],[1,"example-element-detail"],[1,"pl-0"],[1,"py-2"],[1,"mx-2","text-muted"],[1,"mat-header-cell"],[1,"py-1"],[1,"custom-control","custom-switch"],["type","checkbox","class","custom-control-input","checked","",3,"id","change",4,"ngIf"],["type","checkbox","class","custom-control-input",3,"id","change",4,"ngIf"],[1,"custom-control-label",3,"for"],["width","100px",1,"rounded-circle",3,"src","alt"],["src","../../../../assets/img/undraw_product_teardown_elol.svg","width","100px",1,"rounded-circle",3,"alt"],["type","checkbox","checked","",1,"custom-control-input",3,"id","change"],["type","checkbox",1,"custom-control-input",3,"id","change"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["mat-row","",1,"example-detail-row"],[1,"mat-row"],[1,"mat-cell","text-center"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1"],[1,"sk-cube","sk-cube2"],[1,"sk-cube","sk-cube3"],[1,"sk-cube","sk-cube4"],[1,"sk-cube","sk-cube5"],[1,"sk-cube","sk-cube6"],[1,"sk-cube","sk-cube7"],[1,"sk-cube","sk-cube8"],[1,"sk-cube","sk-cube9"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"section",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"h1"),l._uU(6,"Categories"),l.qZA(),l.qZA(),l.TgZ(7,"div",4),l.TgZ(8,"ol",5),l.TgZ(9,"li",6),l.TgZ(10,"a",7),l._uU(11,"Home"),l.qZA(),l.qZA(),l.TgZ(12,"li",8),l._uU(13,"Categories"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"section",9),l.TgZ(15,"div",10),l.TgZ(16,"div",11),l.TgZ(17,"div",12),l.TgZ(18,"div",13),l.TgZ(19,"button",14),l.NdJ("click",function(){return e.newCategory()}),l._uU(20," Nueva categoria "),l.qZA(),l.qZA(),l.TgZ(21,"div",15),l.TgZ(22,"input",16),l.NdJ("keyup",function(t){return e.applyFilter(t)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"div",17),l.TgZ(24,"div",18),l.TgZ(25,"table",19),l.ynx(26,20),l.YNc(27,M,2,0,"th",21),l.YNc(28,B,2,1,"td",22),l.BQk(),l.ynx(29,23),l.YNc(30,R,2,0,"th",21),l.YNc(31,j,2,1,"td",22),l.BQk(),l.ynx(32,24),l.YNc(33,$,2,0,"th",25),l.YNc(34,G,7,0,"td",22),l.BQk(),l.ynx(35,26),l.YNc(36,W,32,15,"td",22),l.BQk(),l.YNc(37,tt,1,0,"tr",27),l.YNc(38,et,1,2,"tr",28),l.YNc(39,it,1,0,"tr",29),l.YNc(40,at,3,1,"tr",30),l.qZA(),l.YNc(41,nt,11,0,"ng-container",31),l.qZA(),l.qZA(),l.TgZ(42,"div",32),l._UZ(43,"mat-paginator",33),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(10),l.Q6J("routerLink",l.DdM(11,ot)),l.xp6(7),l.Q6J("hidden",e.loadData),l.xp6(8),l.Q6J("hidden",e.loadData)("dataSource",e.dataSource),l.xp6(12),l.Q6J("matHeaderRowDef",e.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",e.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",l.DdM(12,st)),l.xp6(2),l.Q6J("ngIf",e.loadData),l.xp6(2),l.Q6J("hidden",e.loadData)("pageSize",10)("pageSizeOptions",l.DdM(13,rt)))},directives:[V.yS,F.BZ,L.YE,F.w1,F.fO,F.Dz,F.as,F.nj,F.Ee,a.O5,Y.NW,F.ge,L.nU,F.ev,F.XQ,F.Gk],pipes:[E._],styles:[""],data:{animation:[(0,H.X$)("detailExpand",[(0,H.SB)("collapsed,void",(0,H.oB)({height:"0px",minHeight:"0",display:"none"})),(0,H.SB)("expanded",(0,H.oB)({height:"*"})),(0,H.eR)("expanded <=> collapsed",(0,H.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")),(0,H.eR)("expanded <=> void",(0,H.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})()}];let ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[V.Bz.forChild(lt)],V.Bz]}),t})();var ut=i(2388);let dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.ez,ct,F.p0,Y.TU,L.JX,r.Is,v.Hi,q.Ps,ut.D,o.UX]]}),t})()}}]);